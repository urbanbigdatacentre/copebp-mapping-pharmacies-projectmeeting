addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "gray",
fill = FALSE,
weight = 3
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addCircles(
data = bd_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = bd_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "darkgray",
fill = FALSE,
weight = 3
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addCircles(
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "darkgray",
fill = FALSE,
weight = 3
) %>%
data = bd_pharm_single_area,
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "darkgray",
fill = FALSE,
weight = 3
) %>%
addCircles(
data = bd_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = bd_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "brown",
fill = FALSE,
weight = 3
) %>%
addCircles(
data = bd_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = bd_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "white",
fill = FALSE,
weight = 3
) %>%
addCircles(
data = bd_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = bd_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "orange",
fill = FALSE,
weight = 3
) %>%
addCircles(
data = bd_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = bd_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = bd_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addPolygons(
data = bd_wards,
group = "Wards",
stroke = TRUE,
color = "orange",
fill = TRUE,
fillOpacity = 0.4,
weight = 3
) %>%
addCircles(
data = bd_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = bd_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = bd_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 2
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = bd_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Wards"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
# Classifying pharmacies into those reporting areas where their clients come from as different from the one it is located
color_loc <- colorFactor(
palette = c("darkgreen",  "darkred"),
domain = pk_pharm_multi_area$location
)
leaflet() %>%
addTiles(group = "OpenStreetMap") %>%  # Add base map
addProviderTiles(providers$Esri.WorldImagery, group = "Satellite") %>%
addPolygons(
data = pk_uc,
group = "Union Councils",
stroke = TRUE,
color = "orange",
fill = TRUE,
fillOpacity = 0.4,
weight = 3
) %>%
addCircles(
data = pk_pharm_single_area,
weight =  1.8,
color = "red",
fillOpacity = 0.9,
stroke = TRUE,
popup = ~paste("_id:", pharmid),
group = "Pharmacies"
) %>%
addCircleMarkers(
data = pk_pharm_multi_area,
color = ~color_loc(location),
radius = 2.8,
fillOpacity = 0.6,
popup = ~paste("_id: ", as.character(pharmid), " & Rep. Location:", location),
group = "Parmacies with clients in other Area"
) %>%
addPolylines(
data = pk_pharm_areas_arcs,
group = "Pharmacy arc links",
color = "darkgreen",
fill = FALSE,
stroke = TRUE,
weight = 0.4
) %>%
addLegend(
"bottomright",
pal = color_loc,
values = pk_pharm_multi_area$location,
title = "Location where client come from"
) %>%
# Add layers control (toggle and radio)
addLayersControl(
baseGroups = c("OpenStreetMap", "Satellite"),
overlayGroups = c("Pharmacies", "Parmacies with clients in other Area", "Pharmacy arc links", "Union Councils"),
options = layersControlOptions(collapsed = FALSE)
) %>%
addFullscreenControl()
sf::st_write(pk_uc, dsn = "suruvey-data/bg-survey-summary.geojson", layer = "pk_uc.geojson")
st_write(points, "suruvey-data/bg-survey-summary.geojson", driver = "GeoJSON"3)
st_write(points, "suruvey-data/bg-survey-summary.geojson", driver = "GeoJSON")
st_write(pk_uc, "suruvey-data/bg-survey-summary.geojson", driver = "GeoJSON")
st_write(pk_uc, "survey-data/bg-survey-summary.geojson", driver = "GeoJSON")
#sf::st_write(pk_uc, dsn = "suruvey-data/bg-survey-summary.geojson", layer = "pk_uc.geojson")
#sf::st_write(pk_pharm_single_area, dsn = "suruvey-data/bg-survey-summary.geojson", layer = "pk_pharm_single_area.geojson")
st_write(pk_uc, "survey-data/bg-survey-summary.geojson", driver = "GeoJSON")
st_write(pk_uc, "survey-data/bg-survey-summary.geojson", driver = "GeoJSON")
st_write(pk_uc, "survey-data/bg-survey-summary.geojson", driver = "GeoJSON")
st_write(pk_pharm_single_area, "survey-data/bg-pharmacies-single-area.geojson", driver = "GeoJSON")
st_write(pk_pharm_single_area, "survey-data/bg-pharmacies-single-area.geojson", driver = "GeoJSON")
st_write(pk_uc, "survey-data/pk-uc-reported-clients.geojson", driver = "GeoJSON")
st_write(pk_pharm_single_area, "survey-data/pk-pharmacies-single-area-reported.geojson", driver = "GeoJSON")
st_write(pk_pharm_multi_area, "survey-data/pk-pharmacies-multi-area-reported.geojson", driver = "GeoJSON")
st_write(pk_pharm_areas_arcs, "survey-data/pk-pharmacies-arcs-to-multi-area.geojson", driver = "GeoJSON")
st_write(pk_uc, "survey-data/pk-uc-reported-clients.geojson", driver = "GeoJSON")
st_write(pk_pharm_single_area, "survey-data/pk-pharmacies-single-area-reported.geojson", driver = "GeoJSON")
st_write(pk_pharm_multi_area, "survey-data/pk-pharmacies-multi-area-reported.geojson", driver = "GeoJSON")
st_write(pk_pharm_areas_arcs, "survey-data/pk-pharmacies-arcs-to-multi-area.geojson", driver = "GeoJSON")
st_write(bd_wards, "survey-data/bd-wards-reported-clients.geojson", driver = "GeoJSON")
st_write(bd_pharm_single_area, "survey-data/bd-pharmacies-single-area-reported.geojson", driver = "GeoJSON")
st_write(bd_pharm_multi_area, "survey-data/bd-pharmacies-multi-area-reported.geojson", driver = "GeoJSON")
st_write(bd_pharm_areas_arcs, "survey-data/bd-pharmacies-arcs-to-multi-area.geojson", driver = "GeoJSON")
View(pk_data_geo)
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id", "_uuid", "pq_district", "pk_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_!", "pq_ns_Visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_d", "pq_non_eligible", "pq_eligible")
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pk_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_!", "pq_ns_Visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_!", "pq_ns_Visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_1", "pq_ns_Visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
st_write(pk_all_pharmacies_layer, "survey-data/pk-all-pharmacies-geo.geojson", driver = "GeoJSON")
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
st_write(pk_all_pharmacies_layer, "survey-data/pk-all-pharmacies-geo.geojson", driver = "GeoJSON")
bg_all_pharmacies_layer <- bg_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion", "pq_consent")
bd_all_pharmacies_layer <- bd_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion", "pq_consent")
bd_all_pharmacies_layer <- bd_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pharmacy_id", "pq_screen", "pq_ns_res",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion", "pq_consent")
st_write(bd_all_pharmacies_layer, "survey-data/bg-all-pharmacies-geo.geojson", driver = "GeoJSON")
bd_all_pharmacies_layer <- bd_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pharmacy_id", "pq_screen", "pq_ns_res", "pq_pd_cat",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion", "pq_consent")
pk_data_geo$pq_pharm_catg
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res", "pq_pharm_catg",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
st_write(pk_all_pharmacies_layer, "survey-data/pk-all-pharmacies-geo.geojson", driver = "GeoJSON")
pk_all_pharmacies_layer <- pk_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pq_calc", "pharmacy_id", "pq_screen", "pq_ns_res", "pq_pharm_catg",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion")
st_write(pk_all_pharmacies_layer, "survey-data/pk-all-pharmacies-geo.geojson", driver = "GeoJSON")
bd_all_pharmacies_layer <- bd_data_geo %>%
select ("_id",  "pq_district", "pq_city", "pq_ward", "pharmacy_id", "pq_screen", "pq_ns_res", "pq_pharm_catg",
"pq_ns_visit_1", "pq_ns_visit_2", "pq_ns_type", "pq_ns_res_oth", "pq_scr_a", "pq_scr_b", "pq_scr_c",
"pq_scr_c1", "pq_scr_d", "pq_non_eligible", "pq_eligible", "pharmacy_inclusion", "pq_consent")
st_write(bd_all_pharmacies_layer, "survey-data/bd-all-pharmacies-geo.geojson", driver = "GeoJSON")
View(bd_all_pharmacies_layer)
